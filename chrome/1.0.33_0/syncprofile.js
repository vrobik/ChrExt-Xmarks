var profileList=[],callback=null;
function HandleLoad(){LoadLocalizedStrings();var a=chrome.extension.getBackgroundPage(),b=a.Xmarks.Settings.GetWindowParams();callback=b.callback;delete b.callback;var a=a.Xmarks.Settings.GetUserSettings(),f=!1,d=document.getElementById("profile-list"),c;for(c in b)if(b.hasOwnProperty(c)){var f=!0,e=document.createElement("option");e.value=c;e.text=b[c];d.appendChild(e);a.profileid&&a.profileid==c&&(d.selectedIndex=d.options.length-1)}f?HandleAction("Show Profiles"):HandleAction("No Profiles")}
function LoadLocalizedStrings(){document.title=chrome.i18n.getMessage("syncprofile_title");document.getElementById("syncprofiles-message-no-profiles").innerHTML=chrome.i18n.getMessage("syncprofiles_no_profiles");document.getElementById("syncprofiles-message-select").innerHTML=chrome.i18n.getMessage("syncprofiles_select");document.getElementById("button-my").value=chrome.i18n.getMessage("dialog_my");document.getElementById("button-ok").value=chrome.i18n.getMessage("dialog_ok");document.getElementById("button-cancel").value=
chrome.i18n.getMessage("dialog_cancel")}
function HandleAction(a){chrome.extension.getBackgroundPage();"No Profiles"==a?(document.getElementById("profiles-display").style.display="none",document.getElementById("button-ok").style.display="none",document.getElementById("profiles-none").style.display="block",document.getElementById("button-my").style.display="inline"):"Show Profiles"==a?(document.getElementById("profiles-display").style.display="block",document.getElementById("button-ok").style.display="inline",document.getElementById("profiles-none").style.display=
"none",document.getElementById("button-my").style.display="none"):"Ok"==a?(a=document.getElementById("profile-list"),a=a.options[a.selectedIndex],window.close(),callback&&callback(a.value,a.text)):"Visit My.Xmarks.com"==a?(window.open("http://my.xmarks.com/?mode=profiles","_blank"),window.close()):"Cancel"==a&&window.close()}
document.addEventListener("DOMContentLoaded",function(){window.addEventListener("load",function(){HandleLoad()});document.getElementById("button-my").addEventListener("click",function(){HandleAction("Visit My.Xmarks.com")});document.getElementById("button-ok").addEventListener("click",function(){HandleAction("Ok")});document.getElementById("button-cancel").addEventListener("click",function(){HandleAction("Cancel")})});
